{% if customer.metafields.custom.customer_type == "food_vendor" %}
  <div id="yotpo-widgets-points-container">
    <div class="yotpo-widget-instance" data-yotpo-instance-id="537747" id="yotpo-widget-1"></div>
  
    <div class="yotpo-widget-instance" data-yotpo-instance-id="626951" id="yotpo-widget-2"></div>
  </div>
  <div id="yotpo-widgets-container">
    <div class="yotpo-widget-instance" data-yotpo-instance-id="537749"></div>
    <div class="yotpo-widget-instance" data-yotpo-instance-id="527520"></div>
    <div class="yotpo-widget-instance" data-yotpo-instance-id="527521"></div>
  </div>
{% elsif customer.metafields.custom.customer_type == "retailer" %}
  <div class="yotpo-widget-instance" data-yotpo-instance-id="537747" id="yotpo-widget-1"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="626951" id="yotpo-widget-2"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="537749"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="527520"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="537723"></div>
{% endif %}|


<script>
function reloadPointsBalanceTags() {
  const targetTags = document.querySelectorAll('#yotpo-widgets-container .yotpo-points-balance-number');

  if (targetTags.length > 0) {
    // ... (rest of your code for reloading tags)
  } else {
    console.warn('Tags with class "yotpo-points-balance-number" not found within the container.');
  }
}

// Call the function to start monitoring and updating
reloadPointsBalanceTags();

const observer = new MutationObserver(() => {
  // Code to execute when mutations occur within the container
  console.log("Mutation detected in yotpo-widgets-container");
  // You can perform specific actions based on the type of mutation here
});

observer.observe(document.getElementById('yotpo-widgets-container'), { childList: true, subtree: true });


  const observer = new MutationObserver(() => {
  console.log("Mutation detected in yotpo-widgets-container");

  // Get the container
  const pointsContainer = document.getElementById('yotpo-widgets-points-container');

  // Clear the container
  while (pointsContainer.firstChild) {
    pointsContainer.removeChild(pointsContainer.firstChild);
  }

  // Reload the widgets
  const widget1 = document.createElement('div');
  widget1.className = 'yotpo-widget-instance';
  widget1.dataset.yotpoInstanceId = '537747';
  widget1.id = 'yotpo-widget-1';
  pointsContainer.appendChild(widget1);

  const widget2 = document.createElement('div');
  widget2.className = 'yotpo-widget-instance';
  widget2.dataset.yotpoInstanceId = '626951';
  widget2.id = 'yotpo-widget-2';
  pointsContainer.appendChild(widget2);
});

observer.observe(document.getElementById('yotpo-widgets-container'), { childList: true, subtree: true });

</script>

