{% if customer.metafields.custom.customer_type == "food_vendor" %}
  <div class="yotpo-widget-instance" data-yotpo-instance-id="537747" id="yotpo-widget-1"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="626951" id="yotpo-widget-2"></div>
  
  <div class="yotpo-widget-instance" data-yotpo-instance-id="537749"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="527520"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="527521"></div>
{% elsif customer.metafields.custom.customer_type == "retailer" %}
  <div class="yotpo-widget-instance" data-yotpo-instance-id="537747" id="yotpo-widget-1"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="626951" id="yotpo-widget-2"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="537749"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="527520"></div>

  <div class="yotpo-widget-instance" data-yotpo-instance-id="537723"></div>
{% endif %}|


<script>
const yotpoWidgetDiv = document.querySelector('.yotpo-widget-instance[data-yotpo-instance-id="626951"]');

function reloadWidget() {
  console.log("Reloading Yotpo widget");
  yotpoWidgetDiv.contentWindow.location.reload(true);
}

function delayedReload() {
  setTimeout(reloadWidget, 3500); // Delay reload by 3.5 seconds
}

// Use MutationObserver for modern browsers
if (typeof MutationObserver !== 'undefined') {
  const observer = new MutationObserver(delayedReload);
  observer.observe(document, { childList: true, subtree: true });
} else {
  // Fallback to DOMSubtreeModified for older browsers
  document.addEventListener('DOMSubtreeModified', delayedReload);
}


  const observer = new MutationObserver(() => {
  console.log("DOM change detected");
});

observer.observe(document, { childList: true, subtree: true });


</script>

